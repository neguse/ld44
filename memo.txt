LD44

Your life is currency.
とは…

とりあえず肉を焼いて食べた

なんとなく、今回はパズルゲームにしようかなと考えている
Currencyでパズルゲームというと、マネーアイドルエクスチェンジャーとかもうぢゃとかあるけど…
パズル部分とCurrency部分はそんなに合わせなくてもいいかな

とりあえず、ぱずるだまぐらいのルールの落ち物を作ってみてから考える

あっ、「Your Life is currency」って、
命を通貨とする感じなのか。なるほど。

回転面倒だからいらないかーと思ってるのだけど、
コラムスみが増してきた…
せっかくだし、斜め消しも入れてもいいかも

回転を入れなくてどうやって調整するんだという話なんだけど
落とす玉の個数を1~3個で調整できるようにするのはどうだろう
上キーを押すごとに個数が変わっていくと

ふつかめ
斜め消しができてない気がするので、バグとりから
バグはとれたけど、どうしようかな

今日やりたいこと
タッチ操作の検討
ゲームルール、難易度曲線を盛り込むことを考えると、もうひとつ要素ほしい
アニメーション

アニメーション簡単でいいからつける。今のだと一瞬で消えるからよくわからん
連鎖きかない?きいた

状態管理がごちゃごちゃしてきたから、状態に入ったとき用処理をいれたい

次タッチ操作かな
タッチ操作、PickとNextを一緒にしちゃって
どこから切り離すかを決める感じにしたい
そうすると、まあ作り直しだよね

ちょっと気になって、リアルタイムに連鎖を繋げられるモードも試してみたけど、
せわしなくなってしまうのだよね
どちらかというとタッチ操作でじっくり遊べるようにしたいので
今回はなしかなあ
リアルタイムに繋がなくて、3手分だけ消すの待ってくれるとかならよいかもだけど
基本操作しなかったら時間進まないようにしたい

カーソル実装したし、ひとまずマウス操作やってみる
できたら次にタッチ操作で

タッチ操作ためしに入れてみたけど、
指に重なると見えないから工夫が必要そう

Wasm版だとSafariで表示が崩れるらしい
タッチ操作やるからにはモバイル対応したいし、今回はGopherJS使いましょう

で、タッチ操作とマウス操作をブラウザ版で両立させたいのだけど、
モバイルだとマウスの座標がよくわからない負値になっててよくわからない値を拾ってしまう
タイトル画面でタッチされたかクリックされたかを覚えておいて、
それに応じてマウスを有効化するかどうかを決めるとよさそう

タッチの方式どうするか
カーソル位置と指の位置をずらす方式は実装が簡単ではあるんだけど
右利きか左利きかでずらす方向変えるのはそれはそれで面倒だし
ずらした先に見たい情報があったらだめだし、だめだよねーって感じになった
なので、実装はちょっと面倒だけど、1回タップでカーソル合わせ、カーソル位置をもう一回タップで決定としたい

…でけっこう適当に実装してみたのだけど、うーん、悪くはないと思うけど良くもないかなあ
PC画面だとあんまり気にならないのだけど、上下をきょろきょろ見ないと進めない感があって微妙
タイトル画面をタップされたとき、右を押されたか左を押されたかを判定しておいて
それによって右ききか左ききか判定するようにしようかな

参考にコラムスやってみた
ゲームギア版: 6x18, 4~6色
メガドラ版:   6x13, 6色

ゲームギア版がかんたん難易度だと4色になるの、連鎖しやすいのがよい
メガドラ版、いきなり6色から始まるのでかなりむずい

じゃまブロックをつくろう
じゃまブロックはぷよぷよのように、となりが消えたら消えるタイプで、
一定ターンごとに降ってくる
こまかく消していくとターンがむだに増えて積みやすくなるということ
これベースでやってみて、バランスをとってルール確定とする!

じゃまブロック作ってみた
消しやすすぎる気がするが、うーん

あとやること
* 落ちてくる元のYをずらす
* ゲームオーバー実装
* じゃまブロック実装
* 調整、ルール確定
* 消しアニメ改善(今のだとよくわからんし、左原点で拡大してるから右にあふれてしまってる)
* 連鎖演出
* スコア?レベル?ターン?表示
* テクスチャのさしかえ
* ゲームオーバーの実装
* タイトル画面ちゃんとする…というかタイトルきめる

やらないこと
* チュートリアル?
* 色ふやす?
